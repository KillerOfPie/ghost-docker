# Replace your-domain.com with your actual domain
{$DOMAIN} {
	import snippets/Logging

	# Traffic Analytics service
	import snippets/TrafficAnalytics

	# ActivityPub Service
	import snippets/ActivityPub

	# Default proxy everything else to Ghost
	handle {
		reverse_proxy ghost:2368
	}

	# Optional: Enable gzip compression
	encode gzip

	# Optional: Add security headers
	header {
		# Enable HSTS
		Strict-Transport-Security max-age=31536000;
		# Prevent embedding in frames
		X-Frame-Options DENY
		# Enable XSS protection
		X-XSS-Protection "1; mode=block"
		# Prevent MIME sniffing
		X-Content-Type-Options nosniff
		# Referrer policy
		Referrer-Policy strict-origin-when-cross-origin
	}
}

# If you want to redirect the www variant of your domain to the non-www varient uncomment the below 4 lines
# Note: You must have DNS setup correctly for this to work
# www.{$DOMAIN} {
# 	import snippets/Logging
# 	redir https://{$DOMAIN}{uri}
# }

# If you want to redirect the non-www variant of your domain to the www varient uncomment the below 4 lines and replace REPLACE_ME with your domain
# Note: You must have DNS setup correctly for this to work
# REPLACE_ME {
# 	import snippets/Logging
# 	redir https://REPLACE_ME{uri}
# }
